var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),__awaiter=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o["throw"](t))}catch(e){r(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,c)}s((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},alien;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n._classDic={},n._instanceDic={},n.stack=new t.StackNavigator(n),n}return __extends(n,e),n.prototype.register=function(t,e){this._classDic[t]=e},n.prototype.push=function(t,e){void 0===e&&(e=null),this.stack.push(t,e)},n.prototype.pop=function(t){void 0===t&&(t=null),this.stack.pop(t)},n.prototype.popToBottom=function(t){void 0===t&&(t=null),this.stack.popTo(0,null,t)},n.prototype.popAll=function(t,e){void 0===e&&(e=null),this.stack.popAll(t,e)},n.prototype.replace=function(t,e){void 0===e&&(e=null),this.stack.replace(t,e)},n.prototype.jump=function(t,e){void 0===e&&(e=null),this.stack.jump(t,e)},Object.defineProperty(n.prototype,"currentView",{get:function(){return this._currentView},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentName",{get:function(){return this._currentName},enumerable:!0,configurable:!0}),n.prototype.getSceneInstanceByName=function(t){var e=this._instanceDic[t];return e||(e=this._instanceDic[t]=new this._classDic[t]),e},n.prototype.addView=function(t,e){},n.prototype.onEnter=function(t,e,o,i){return __awaiter(this,void 0,void 0,function(){var r,a;return __generator(this,function(c){switch(c.label){case 0:return r=this.getSceneInstanceByName(t),this._currentView=r,this._currentName=t,[4,r.onWillMount(e,o,i)];case 1:return c.sent(),a=r.onAddView(),this.addView(r,a),n.log&&console.log(t+" will enter."),this.dispatchEventWith(n.SCENE_WILL_ENTER,!1,{name:t,last:e,action:o,parameters:i}),[4,r.onWillEnter(e,o,i)];case 2:return c.sent(),n.log&&console.log(t+" did enter."),this.dispatchEventWith(n.SCENE_DID_ENTER,!1,{name:t,last:e,action:o,parameters:i}),r.onDidEnter(e,o,i),[2]}})})},n.prototype.onLeave=function(t,e,o,i){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(a){switch(a.label){case 0:return r=this.getSceneInstanceByName(t),[4,r.onWillUnMount(t,o,i)];case 1:return a.sent(),n.log&&console.log(t+" will leave."),this.dispatchEventWith(n.SCENE_WILL_LEAVE,!1,{name:t,next:e,action:o,parameters:i}),[4,r.onWillLeave(e,o,i)];case 2:return a.sent(),n.log&&console.log(t+" did leave."),this.dispatchEventWith(n.SCENE_DID_LEAVE,!1,{name:t,next:e,action:o,parameters:i}),r.onDidLeave(e,o,i),[2]}})})},n.prototype.onError=function(t){},n.SCENE_WILL_ENTER="SCENE_WILL_ENTER",n.SCENE_DID_ENTER="SCENE_DID_ENTER",n.SCENE_WILL_LEAVE="SCENE_WILL_LEAVE",n.SCENE_DID_LEAVE="SCENE_DID_LEAVE",n.log=!1,n}(egret.EventDispatcher);t.Navigator=e,__reflect(e.prototype,"alien.Navigator",["alien.INavigatorDelegate"])}(alien||(alien={}));var alien;!function(t){var e;!function(t){t[t.Push=0]="Push",t[t.Pop=1]="Pop",t[t.Replace=2]="Replace",t[t.Jump=3]="Jump"}(e=t.NavigatorAction||(t.NavigatorAction={}));var n=function(){function t(t){this._stack=[],this._delegate=t}return t.prototype.catchPromise=function(t){var e=this;t&&t["catch"](function(t){e._delegate.onError(t)})},t.prototype.push=function(t,n){void 0===n&&(n=null);var o=this.getTopSceneName();if(o){if(o==t)return;this.catchPromise(this._delegate.onLeave(o,t,e.Push,n))}this._stack.push(t),this.catchPromise(this._delegate.onEnter(t,o,e.Push,n))},t.prototype.popTo=function(t,n,o){if(void 0===o&&(o=null),!(this._stack.length>0&&this._stack.length<t+1)){var i=this.getTopSceneName();this._stack.splice(Math.max(t+1,0));var r=this._stack[t];r||this._stack.push(r=n),i&&this.catchPromise(this._delegate.onLeave(i,r,e.Pop,o)),this.catchPromise(this._delegate.onEnter(r,i,e.Pop,o))}},t.prototype.pop=function(t){void 0===t&&(t=null),this.popTo(this._stack.length-2,null,t)},t.prototype.popAll=function(t,e){void 0===e&&(e=null),this.popTo(-1,t,e)},t.prototype.replace=function(t,n){void 0===n&&(n=null);var o=this._stack.pop();this._stack.push(t),this.catchPromise(this._delegate.onLeave(o,t,e.Replace,n)),this.catchPromise(this._delegate.onEnter(t,o,e.Replace,n))},t.prototype.jump=function(t,n){if(void 0===n&&(n=null),this._stack.length<2)return void this.push(t,n);var o=this._stack.pop();this._stack.splice(1);var i=t;this._stack.push(i),this._delegate.onLeave(o,i,e.Pop,n),this._delegate.onEnter(i,o,e.Pop,n)},t.prototype.getTopSceneName=function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},t.prototype.getBottomSceneName=function(){return this._stack.length>0?this._stack[0]:null},t}();t.StackNavigator=n,__reflect(n.prototype,"alien.StackNavigator")}(alien||(alien={}));